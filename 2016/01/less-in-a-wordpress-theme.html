<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>LESS in a WordPress theme</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/font-awesome/css/all.min.css" />
  </head>
  <body>
    <div class="grid grid-cols-1 lg:grid-cols-layout gap-4">
      <div class="bg-white border-gray-200 border shadow-xl p-2 m-4 lg:mb-0 lg:mr-0 lg:col-start-2 text-center lg:text-left">
        <img src="/assets/profile.jpg" alt="Adam Laycock" class="m-auto" />
        <h2 class="font-light text-2xl">Adam Laycock</h2>
        
        <a href="/">Home</a>
        <a href="/blog/">All Posts</a>
        <a href="/about/">About</a>
        <a href="/uses/">Uses</a>
        <a href="/contact/">Contact</a>
      </div>
      <div class="lg:row-span-2">
        <section class="p-4 lg:pb-0 lg:pl-0">
          <div class="bg-white border-gray-300 border shadow-xl p-2 mb-4">
  <h1 class="font-light text-3xl border-b border-gray-200 mb-4">LESS in a WordPress theme</h1>
  <ul class="flex gap-2">
    <li>12 January 2016</li>
    
      <li><a href="/tag/wordpress">#wordpress</a></li>
    
  </ul>
</div>
<div class="bg-white prose border-gray-300 border shadow-xl p-2"><blockquote>
  <p>I have made a replacement for wp-less! If you intrested in using less in your WordPress theme check it out. <a href="/2018/07/wp_enqueue_less-a-replacement-for-wp-less/">wp_enqueue_less</a>.</p>
</blockquote>

<p><a href="http://lesscss.org/">LESS</a> is a CSS pre-processor which adds tonnes of features that extend CSS. I have been using it for a while when making my <a href="http://www.wordpress.org/">WordPress</a> themes and have gotten it work pretty well with the Theme Customizer.</p>

<p>The first part of this setup is <a href="https://wordpress.org/plugins/wp-less/">WP-Less</a> which allows WordPress to compile LESS. I dropped the plugin into my theme under <code class="language-plaintext highlighter-rouge">vendor/wp-less</code> and deleted <code class="language-plaintext highlighter-rouge">vendor/wp-less/.gitignore</code> so that my git repo contained all the required files.</p>

<p>With that in place I added the following to my <code class="language-plaintext highlighter-rouge">functions.php</code></p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">my_theme_enqueue_styles</span><span class="p">(){</span>
    <span class="k">require</span> <span class="nb">dirname</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">)</span> <span class="mf">.</span> <span class="s1">'/vendor/wp-less/bootstrap-for-theme.php'</span><span class="p">;</span>
    <span class="nv">$less</span> <span class="o">=</span> <span class="nc">WPLessPlugin</span><span class="o">::</span><span class="nf">getInstance</span><span class="p">();</span>
    <span class="nf">wp_enqueue_style</span><span class="p">(</span><span class="s1">'theme-main'</span><span class="p">,</span> <span class="nf">get_template_directory_uri</span><span class="p">()</span> <span class="mf">.</span> <span class="s1">'/style.less'</span><span class="p">);</span>
    <span class="nv">$less</span><span class="o">-&gt;</span><span class="nf">dispatch</span><span class="p">();</span>
<span class="p">}</span>

<span class="nf">add_action</span><span class="p">(</span><span class="s1">'wp_enqueue_scripts'</span><span class="p">,</span> <span class="s1">'my_theme_enqueue_styles'</span><span class="p">);</span>
</code></pre></div></div>

<p>This compiles style.less and adds it to the head tag through <code class="language-plaintext highlighter-rouge">wp_header()</code>.</p>

<p>Great! At the moment there isnâ€™t a huge benefit to this I could just compile the stylesheet before I publish the theme and the result would be the same. So now how do you get custom variables into this?</p>

<p>I then add to the theme customizer things like colour of this and width of that. I wont go into too much detail about how to add options, <a href="http://www.narga.net/comprehensive-guide-wordpress-theme-options-with-customization-api/">Narga have a great guide on the subject</a> and to confuse matters I use a library of my own writing.</p>

<p>For this example lets assume that you have a function called <code class="language-plaintext highlighter-rouge">my_theme_get_or_use_default_theme_option($option)</code> which you use to get options set in the customizer or return a default value.</p>

<p>You can then pass those options to WP-Less in your <code class="language-plaintext highlighter-rouge">my_theme_enqueue_styles</code> function like so:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$less</span><span class="o">-&gt;</span><span class="nf">addVariable</span><span class="p">(</span><span class="s1">'textColor'</span><span class="p">,</span> <span class="nf">my_theme_get_or_use_default_theme_option</span><span class="p">(</span><span class="s1">'text_color'</span><span class="p">));</span>
</code></pre></div></div>

<p>and then in your stylesheet</p>

<pre><code class="language-less">.class{
  color:@textColor;
}
</code></pre>

<p>Thats it! Now when ever a user changes anything in the theme customizer the stylesheet is generated. For example one of the themes I made has options like this:</p>

<p><img src="/assets/2016/01/less-in-a-wordpress-theme/wp-less-example.png" alt="WP LESS example" /></p>

<p>Which means that the site can look vastly different whilst using the same theme code. There is no ThemeName-Customer1 ThemeName-Customer2 on our update server or any child themes on the sites we supplied. We publish an update and when a customer installs it if the less has changed the WP-Less generates the new stylesheet straight away.</p>

<p>These 3 sites use the same theme with different options set and as you can see you can produce a pretty big difference that is easy to maintain.</p>

<ul>
  <li><a href="http://www.leck-st-peters.lancs.sch.uk/">Leck St.Peters C of E School</a></li>
  <li><a href="http://www.grimsargh-st-michaels.lancs.sch.uk/">Grimsasrgh St. Michaels C of E School</a></li>
  <li><a href="http://www.ridge.lancs.sch.uk/">Ridge Community Primary School</a></li>
</ul>

</div>
        </section>
        <footer class="mt-4 px-4 lg:px-0">
          &copy; Adam Laycock 2024
        </footer>
      </div>
    </div>
  </body>
</html>