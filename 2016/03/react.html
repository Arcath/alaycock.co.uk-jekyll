<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>React</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/font-awesome/css/all.min.css" />
  </head>
  <body>
    <div class="grid grid-cols-layout gap-4">
      <div class="bg-white border-gray-200 border shadow-xl p-2 mt-4 ml-4 col-start-2">
        <img src="/assets/profile.jpg" />
        <h2 class="font-light text-2xl">Adam Laycock</h2>
        
        <a href="/">Home</a>
        <a href="/blog/">All Posts</a>
        <a href="/about/">About</a>
        <a href="/uses/">Uses</a>
        <a href="/contact/">Contact</a>
      </div>
      <div class="row-span-2">
        <section class="pt-4 pr-4">
          <div class="bg-white border-gray-300 border shadow-xl p-2 mb-4">
  <h1 class="font-light text-3xl border-b border-gray-200 mb-4">React</h1>
  <ul class="flex gap-2">
    <li>29 March 2016</li>
    
      <li><a href="/tag/react">#react</a></li>
    
      <li><a href="/tag/jekyll">#jekyll</a></li>
    
  </ul>
</div>
<div class="bg-white prose border-gray-300 border shadow-xl p-2"><p><a href="https://facebook.github.io/react/">React</a>, in Jekyll, with dynamic pages!</p>

<h2 id="why">Why?</h2>

<p>Most of my recent work on this site has been around using pushState, ajax and <a href="http://lunrjs.com/">lunr</a> to create a static site that you can search with pages for every category etc… that didn’t require me to create a page for each one. This resulted in some code duplication and data bloat mainly in the post list. <a href="https://github.com/Arcath/arcath.github.io/blob/4262f08581b14bc4770294ba99abafeeef696783/_includes/post.html">This include</a> was the post details box used on the blog page, the search results and category list. Only 1 out of those 3 pages was actually being generated by Jekyll and to remove the need to update 2 <em>templates</em> at once I put the rendered output of that include for each post into a JSON file.</p>

<p>React for those of you that don’t know is a Javascript rendering engine that runs in browser to create your HTML. It is normally used along side an API of some kind to interact with a database and read/write data, I have used it slightly differently.</p>

<p>Using React has let me create a <em>dynamic</em> site hosted on Github pages where search etc… is integrated seamlessly instead of bolted on to the side after page load.</p>

<h2 id="how">How?</h2>

<p>To do this I needed to get all my sites content into a format that could be read by Javascript which although JSON is designed for this very job I opted to use XML. From my earlier work I found that Jekyll’s ability to generate JSON is not brilliant, liquid has an <code class="language-plaintext highlighter-rouge">xml_escape</code> function which I was using in a long chain to create mostly valid JSON. With that using XML made more sense, I could just pipe everything through <code class="language-plaintext highlighter-rouge">xml_escape</code> as it goes into my XML and I get a valid document.</p>

<p>To make the XML more database like I put all the entries in a SODB letting me search for content based on the current url. This is separate to the lunr search that is also on the site, SODB isn’t a linguistic search and can’t rank based on relevancy etc…</p>

<p>I used <a href="https://github.com/reactjs/react-router">React-Router</a> to keep the URL up to date and handle page-transitions. I’d never used it before but will be doing after this it is the perfect solution to the problem I had here and has lots of potential. That being said I did have a few issues working stuff out as I don’t use JSX unlike most examples.</p>

<p>Lets run through how loading this post in your browser worked.</p>

<ol>
  <li>Your browser gets the HTML</li>
  <li>Your browser requests the stylesheet &amp; JS assets</li>
  <li>React-Router starts up and renders the Layout with the Loader component</li>
  <li>The Loader component triggers a request for /content.xml</li>
  <li>Whilst waiting for the response a loading spinner is shown</li>
  <li>The response is received, parsed and put into the <a href="https://github.com/Arcath/SODB">SODB</a> and the components state is updated with the database</li>
  <li>Now that the data is there the state change causes the Post Component to be loaded</li>
</ol>

<p>The time to readable content is a bit longer than before which is usually to be avoided but in this case the site becomes so much faster and a lot more functional once loading is complete.</p>

<p>I abuse the ways Github Pages uses 404.html to create pages on the fly in React which is coincidentally why this <a href="https://github.com/nbluis/static-server/pull/15">PR on static-server exists</a>.</p>

<p>All pages are created using a layout that doesn’t output their contents but instead loads a bunch of Javascript files. This means that although /code.html does actually exist it only loads up React same as /404.html.</p>

<p>I created a <a href="http://browserify.org/">browserify</a> bundle to load up all the requirements the file I build into my bundle is just a list of requires.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">React</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">ReactDOM</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">react-dom</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">ReactRouter</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">react-router</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">ReactGA</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">react-ga</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">ReactDisqusThread</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">react-disqus-thread</span><span class="dl">'</span><span class="p">)</span>

<span class="nx">Marked</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">marked</span><span class="dl">'</span><span class="p">)</span>

<span class="nx">SODB</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">sodb</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="the-code">The Code</h2>

<h3 id="xml-parsing">XML Parsing</h3>

<p>My XML Parsing a bit quick and dirty but I was having issues with other implementations not parsing correctly or refusing to parse it.</p>

<div class="language-coffee highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">arseData</span> <span class="o">=</span> <span class="p">(</span><span class="nx">jQueryData</span><span class="p">)</span> <span class="o">-&gt;</span>
    <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nx">children</span> <span class="o">=</span> <span class="nx">jQueryData</span><span class="p">.</span><span class="na">children</span><span class="p">()</span>

    <span class="nx">children</span><span class="p">.</span><span class="na">each</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">child</span><span class="p">)</span> <span class="o">-&gt;</span>
        <span class="k">if</span> <span class="nx">child</span><span class="p">.</span><span class="na">childElementCount</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="nx">data</span> <span class="o">=</span> <span class="nx">addNode</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">child</span><span class="p">.</span><span class="na">nodeName</span><span class="p">,</span> <span class="nx">parseData</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">child</span><span class="p">)))</span>
        <span class="k">else</span>
            <span class="nx">data</span><span class="p">[</span><span class="nx">child</span><span class="p">.</span><span class="na">nodeName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">child</span><span class="p">.</span><span class="na">innerHTML</span>

    <span class="k">return</span> <span class="nx">data</span>

<span class="nx">addNode</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">nodeName</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">-&gt;</span>
    <span class="k">if</span> <span class="nx">data</span><span class="p">[</span><span class="nx">nodeName</span><span class="p">]</span>
        <span class="k">if</span> <span class="nx">data</span><span class="p">[</span><span class="nx">nodeName</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span>
            <span class="nx">data</span><span class="p">[</span><span class="nx">nodeName</span><span class="p">].</span><span class="na">push</span> <span class="nx">value</span>
        <span class="k">else</span>
            <span class="nx">data</span><span class="p">[</span><span class="nx">nodeName</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">value</span> <span class="p">].</span><span class="na">concat</span> <span class="nx">data</span><span class="p">[</span><span class="nx">nodeName</span><span class="p">]</span>
    <span class="k">else</span>
        <span class="nx">data</span><span class="p">[</span><span class="nx">nodeName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>

    <span class="k">return</span> <span class="nx">data</span>

<span class="c1">## from another function</span>
<span class="nx">jQueryData</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="na">parseXML</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span>
<span class="nx">parsedData</span> <span class="o">=</span> <span class="nx">parseData</span><span class="p">(</span><span class="nx">jQueryData</span><span class="p">)</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">parseData</code> takes jQueries attempt at parsing the XML and for each child at the current level it checks if it has children, if it does it calls <code class="language-plaintext highlighter-rouge">addNode</code> to add a sub node to <code class="language-plaintext highlighter-rouge">data</code> this line recurses downwards until it reaches a childless node. If a node is childless its content is put directly into data at the <code class="language-plaintext highlighter-rouge">nodeName</code>.</p>

<p><code class="language-plaintext highlighter-rouge">addNode</code>s main purpose is to create arrays if needed. The only draw back to this approach is the array creation which doesn’t quite work how I would like. My XML has a structure like this:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;site&gt;</span>
    <span class="nt">&lt;posts&gt;</span>
        <span class="nt">&lt;post&gt;</span>
            <span class="nt">&lt;title&gt;</span>Post 1<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;/post&gt;</span>
        <span class="nt">&lt;post&gt;</span>
            <span class="nt">&lt;title&gt;</span>Post 2<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;/post&gt;</span>
    <span class="nt">&lt;/posts&gt;</span>
<span class="nt">&lt;/site&gt;</span>
</code></pre></div></div>

<p>I was aiming to put the array at <code class="language-plaintext highlighter-rouge">site.posts</code> but instead it appears at <code class="language-plaintext highlighter-rouge">site.posts.post</code> as that is the conflicting key. I considered running another pass to move arrays one up if the parent node only had 1 child but adding more loops seemed a waste for something that had no impact on the end user and ultimately ended up being passed into another structure.</p>

<h3 id="the-router">The Router</h3>

<div class="language-coffee highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">ArcathNetRouter</span> <span class="o">=</span> <span class="p">(</span>
    <span class="nx">Router</span><span class="p">(</span>
        <span class="p">{</span><span class="na">history</span><span class="o">:</span> <span class="nx">browserHistory</span><span class="p">}</span>
        <span class="nx">Route</span><span class="p">(</span>
            <span class="p">{</span><span class="na">name</span><span class="o">:</span> <span class="s">'Layout'</span><span class="p">,</span> <span class="na">path</span><span class="o">:</span> <span class="s">'/'</span><span class="p">,</span> <span class="na">component</span><span class="o">:</span> <span class="nx">Layout</span><span class="p">}</span>
            <span class="nx">IndexRoute</span><span class="p">({</span><span class="na">name</span><span class="o">:</span> <span class="s">'index'</span><span class="p">,</span> <span class="na">component</span><span class="o">:</span> <span class="nx">Loader</span><span class="p">,</span> <span class="na">params</span><span class="o">:</span> <span class="p">{</span><span class="na">component</span><span class="o">:</span> <span class="nx">Static</span><span class="p">}})</span>
            <span class="nx">Route</span><span class="p">({</span><span class="na">name</span><span class="o">:</span> <span class="s">'Blog'</span><span class="p">,</span> <span class="na">path</span><span class="o">:</span> <span class="s">'blog.html'</span><span class="p">,</span> <span class="na">component</span><span class="o">:</span> <span class="nx">Loader</span><span class="p">,</span> <span class="na">params</span><span class="o">:</span> <span class="p">{</span><span class="na">component</span><span class="o">:</span> <span class="nx">Blog</span><span class="p">}})</span>
            <span class="nx">Route</span><span class="p">({</span><span class="na">name</span><span class="o">:</span> <span class="s">'Categories'</span><span class="p">,</span> <span class="na">path</span><span class="o">:</span> <span class="s">'category.html'</span><span class="p">,</span> <span class="na">component</span><span class="o">:</span> <span class="nx">Loader</span><span class="p">,</span> <span class="na">params</span><span class="o">:</span> <span class="p">{</span><span class="na">component</span><span class="o">:</span> <span class="nx">Categories</span><span class="p">}})</span>
            <span class="nx">Route</span><span class="p">({</span><span class="na">name</span><span class="o">:</span> <span class="s">'Category'</span><span class="p">,</span> <span class="na">path</span><span class="o">:</span> <span class="s">'category/:name'</span><span class="p">,</span> <span class="na">component</span><span class="o">:</span> <span class="nx">Loader</span><span class="p">,</span> <span class="na">params</span><span class="o">:</span> <span class="p">{</span><span class="na">component</span><span class="o">:</span> <span class="nx">Category</span><span class="p">}})</span>
            <span class="nx">Route</span><span class="p">({</span><span class="na">name</span><span class="o">:</span> <span class="s">'CV'</span><span class="p">,</span> <span class="na">path</span><span class="o">:</span> <span class="s">'cv.html'</span><span class="p">,</span> <span class="na">component</span><span class="o">:</span> <span class="nx">Loader</span><span class="p">,</span> <span class="na">params</span><span class="o">:</span> <span class="p">{</span><span class="na">component</span><span class="o">:</span> <span class="nx">Static</span><span class="p">}})</span>
            <span class="nx">Route</span><span class="p">({</span><span class="na">name</span><span class="o">:</span> <span class="s">'Code'</span><span class="p">,</span> <span class="na">path</span><span class="o">:</span> <span class="s">'code.html'</span><span class="p">,</span> <span class="na">component</span><span class="o">:</span> <span class="nx">Loader</span><span class="p">,</span> <span class="na">params</span><span class="o">:</span> <span class="p">{</span><span class="na">component</span><span class="o">:</span> <span class="nx">Static</span><span class="p">}})</span>

            <span class="nx">Route</span><span class="p">({</span><span class="na">name</span><span class="o">:</span> <span class="s">'Post'</span><span class="p">,</span> <span class="na">path</span><span class="o">:</span> <span class="s">':year/:month/:day/:title.html'</span><span class="p">,</span> <span class="na">component</span><span class="o">:</span> <span class="nx">Loader</span><span class="p">,</span> <span class="na">params</span><span class="o">:</span> <span class="p">{</span><span class="na">component</span><span class="o">:</span> <span class="nx">Post</span><span class="p">}})</span>
            <span class="nx">Route</span><span class="p">({</span><span class="na">name</span><span class="o">:</span> <span class="s">'Search'</span><span class="p">,</span> <span class="na">path</span><span class="o">:</span> <span class="s">'search/:term'</span><span class="p">,</span> <span class="na">component</span><span class="o">:</span> <span class="nx">Loader</span><span class="p">,</span> <span class="na">params</span><span class="o">:</span> <span class="p">{</span><span class="na">component</span><span class="o">:</span> <span class="nx">Search</span><span class="p">}})</span>
        <span class="p">)</span>

        <span class="nx">Route</span><span class="p">({</span><span class="na">name</span><span class="o">:</span> <span class="s">'NotFound'</span><span class="p">,</span> <span class="na">path</span><span class="o">:</span> <span class="s">'*'</span><span class="p">,</span> <span class="na">component</span><span class="o">:</span> <span class="nx">NotFound</span><span class="p">})</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre></div></div>

<p>The Router defines that the <code class="language-plaintext highlighter-rouge">Layout</code> component should be used for everything under /. All the routes from the old system are defined here as well as a 404 error page as I have abused the behavior of Github pages to use a provided 404.html to allow these <em>dynamic</em> pages to exist.</p>

<p>All the <em>content</em> routes pass through a loader component that ensures that the sites content has been fetched before displaying the intended component.</p>

<h3 id="the-loader-component">The Loader Component</h3>

<div class="language-coffee highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Loader</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="na">createClass</span><span class="p">({</span>
    <span class="na">getInitialState</span><span class="o">:</span> <span class="o">-&gt;</span>
        <span class="p">{</span> <span class="na">loaded</span><span class="o">:</span> <span class="no">false</span> <span class="p">}</span>

    <span class="na">componentDidMount</span><span class="o">:</span> <span class="o">-&gt;</span>
        <span class="nx">_</span> <span class="o">=</span> <span class="err">@</span>
        <span class="nx">getData</span><span class="p">((</span><span class="nx">content</span><span class="p">)</span> <span class="o">-&gt;</span>
            <span class="nx">_</span><span class="p">.</span><span class="na">setState</span><span class="p">({</span> <span class="na">loaded</span><span class="o">:</span> <span class="no">true</span><span class="p">,</span> <span class="na">content</span><span class="o">:</span> <span class="nx">content</span> <span class="p">})</span>
        <span class="p">)</span>

    <span class="na">render</span><span class="o">:</span> <span class="o">-&gt;</span>
        <span class="nx">React</span><span class="p">.</span><span class="na">DOM</span><span class="p">.</span><span class="na">div</span> <span class="p">{},</span>
            <span class="k">if</span> <span class="vi">@</span><span class="na">state</span><span class="p">.</span><span class="na">loaded</span>
                <span class="nx">React</span><span class="p">.</span><span class="na">createElement</span><span class="p">(</span><span class="vi">@</span><span class="na">props</span><span class="p">.</span><span class="na">route</span><span class="p">.</span><span class="na">params</span><span class="p">.</span><span class="na">component</span><span class="p">,</span> <span class="p">{</span>
                    <span class="na">content</span><span class="o">:</span> <span class="vi">@</span><span class="na">state</span><span class="p">.</span><span class="na">content</span><span class="p">,</span>
                    <span class="na">location</span><span class="o">:</span> <span class="vi">@</span><span class="na">props</span><span class="p">.</span><span class="na">location</span><span class="p">,</span>
                    <span class="na">routeParams</span><span class="o">:</span> <span class="vi">@</span><span class="na">props</span><span class="p">.</span><span class="na">routeParams</span>
                <span class="p">})</span>
            <span class="k">else</span>
                <span class="nx">React</span><span class="p">.</span><span class="na">createElement</span><span class="p">(</span><span class="nx">Loading</span><span class="p">,</span> <span class="p">{})</span>
<span class="p">})</span>
</code></pre></div></div>

<p>The Loader is used by every route to ensure the sites <code class="language-plaintext highlighter-rouge">/content.xml</code> has been loaded and parsed before trying to render a component that needs data.</p>

<p>Initially <code class="language-plaintext highlighter-rouge">state.loaded</code> is false which causes <code class="language-plaintext highlighter-rouge">render</code> to render the Loading component, once the data is received its state changes and <em>actual</em> component is rendered instead.</p>

<h3 id="the-static-component">The Static Component</h3>

<div class="language-coffee highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Static</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="na">createClass</span><span class="p">({</span>
    <span class="na">render</span><span class="o">:</span> <span class="o">-&gt;</span>
        <span class="nx">page</span> <span class="o">=</span> <span class="vi">@</span><span class="na">props</span><span class="p">.</span><span class="na">content</span><span class="p">.</span><span class="na">findOne</span><span class="p">({</span><span class="na">link</span><span class="o">:</span> <span class="vi">@</span><span class="na">props</span><span class="p">.</span><span class="na">location</span><span class="p">.</span><span class="na">pathname</span><span class="p">})</span>

        <span class="nx">setTitle</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="na">title</span><span class="p">)</span>

        <span class="k">if</span> <span class="nx">page</span><span class="p">.</span><span class="na">markdown</span>
            <span class="nx">content</span> <span class="o">=</span> <span class="nx">Marked</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="na">content</span><span class="p">)</span>
        <span class="k">else</span>
            <span class="nx">content</span> <span class="o">=</span> <span class="nx">htmlDecode</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="na">content</span><span class="p">)</span>

        <span class="nx">React</span><span class="p">.</span><span class="na">DOM</span><span class="p">.</span><span class="na">div</span> <span class="p">{},</span>
            <span class="nx">React</span><span class="p">.</span><span class="na">DOM</span><span class="p">.</span><span class="na">div</span> <span class="p">{</span><span class="na">dangerouslySetInnerHTML</span><span class="o">:</span> <span class="p">{</span><span class="na">__html</span><span class="o">:</span> <span class="nx">content</span><span class="p">}}</span>
<span class="p">})</span>
</code></pre></div></div>

<p>This component is the <em>static</em> content renderer which find the page for the given URL and spouts its HTML straight out to the user. It can parse markdown if needed, I found an odd case where my CV had un-parsed content when creating <code class="language-plaintext highlighter-rouge">/content.xml</code> which was messing up my rendering.</p>

<h3 id="the-blog-component">The Blog Component</h3>

<div class="language-coffee highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Blog</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="na">createClass</span><span class="p">({</span>
    <span class="na">blogYears</span><span class="o">:</span> <span class="o">-&gt;</span>
        <span class="nx">posts</span> <span class="o">=</span> <span class="vi">@</span><span class="na">props</span><span class="p">.</span><span class="na">content</span><span class="p">.</span><span class="na">where</span><span class="p">({</span><span class="na">type</span><span class="o">:</span> <span class="s">'post'</span><span class="p">})</span>
        <span class="nx">years</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="nx">post</span> <span class="o">in</span> <span class="nx">posts</span>
            <span class="k">if</span> <span class="nx">years</span><span class="p">.</span><span class="na">indexOf</span><span class="p">(</span><span class="nx">post</span><span class="p">.</span><span class="na">year</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span>
                <span class="nx">years</span><span class="p">.</span><span class="na">push</span> <span class="nx">post</span><span class="p">.</span><span class="na">year</span>

        <span class="k">return</span> <span class="nx">years</span>

    <span class="na">render</span><span class="o">:</span> <span class="o">-&gt;</span>
        <span class="nx">setTitle</span><span class="p">(</span><span class="s">'Blog'</span><span class="p">)</span>

        <span class="nx">React</span><span class="p">.</span><span class="na">DOM</span><span class="p">.</span><span class="na">div</span> <span class="p">{},</span>
            <span class="nx">React</span><span class="p">.</span><span class="na">DOM</span><span class="p">.</span><span class="na">h1</span> <span class="p">{},</span> <span class="s">'Blog'</span>
            <span class="k">for</span> <span class="nx">year</span> <span class="o">in</span> <span class="vi">@</span><span class="na">blogYears</span><span class="p">()</span>
                <span class="nx">React</span><span class="p">.</span><span class="na">DOM</span><span class="p">.</span><span class="na">div</span> <span class="p">{</span><span class="na">key</span><span class="o">:</span> <span class="nx">year</span><span class="p">},</span>
                <span class="nx">React</span><span class="p">.</span><span class="na">DOM</span><span class="p">.</span><span class="na">h2</span> <span class="p">{},</span> <span class="nx">year</span>
                    <span class="k">for</span> <span class="nx">post</span> <span class="o">in</span> <span class="vi">@</span><span class="na">props</span><span class="p">.</span><span class="na">content</span><span class="p">.</span><span class="na">where</span><span class="p">({</span><span class="na">type</span><span class="o">:</span> <span class="s">'post'</span><span class="p">},</span> <span class="p">{</span><span class="na">year</span><span class="o">:</span> <span class="nx">year</span><span class="p">})</span>
                        <span class="nx">React</span><span class="p">.</span><span class="na">createElement</span><span class="p">(</span><span class="nx">PostDetails</span><span class="p">,</span> <span class="p">{</span><span class="na">key</span><span class="o">:</span> <span class="nx">post</span><span class="p">.</span><span class="na">___id</span><span class="p">,</span> <span class="na">post</span><span class="o">:</span> <span class="nx">post</span><span class="p">})</span>
<span class="p">})</span>
</code></pre></div></div>

<p>This is one of the more dynamic components in the site. It loops through each year which has posts and creates a <code class="language-plaintext highlighter-rouge">PostDetails</code> component for each post in each year.</p>

<h3 id="and-more">And More</h3>

<p>A lot went into this change all of which can be seen in the <a href="https://github.com/Arcath/arcath.github.io/commit/eaa5196bee231a3606d1cb76e8a5ba3ea8113331">commit</a>, going though all of it here would be a very a long post.</p>

<h2 id="in-conclusion">In Conclusion</h2>

<p>This has been a worthwhile move as far as I am concerned, I have ironed out all the kinks I could find and every page renders successfully (not all of them did to begin with).</p>

<p>I recommend trying this out on your sites, and I hope it makes you think of a static site as much more than static HTML.</p>
</div>
        </section>
        <footer class="mt-4">
          &copy; Adam Laycock 2024
        </footer>
      </div>
    </div>
  </body>
</html>