<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Squirrel Release Server</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/font-awesome/css/all.min.css" />
  </head>
  <body>
    <div class="grid grid-cols-1 lg:grid-cols-layout gap-4">
      <div class="bg-white border-gray-200 border shadow-xl p-2 m-4 lg:mb-0 lg:mr-0 lg:col-start-2 text-center lg:text-left">
        <img src="/assets/profile.jpg" alt="Adam Laycock" class="m-auto" />
        <h2 class="font-light text-2xl">Adam Laycock</h2>
        
        <a href="/">Home</a>
        <a href="/blog/">All Posts</a>
        <a href="/about/">About</a>
        <a href="/uses/">Uses</a>
        <a href="/contact/">Contact</a>
      </div>
      <div class="lg:row-span-2">
        <section class="p-4 lg:pb-0 lg:pl-0">
          <div class="bg-white border-gray-300 border shadow-xl p-2 mb-4">
  <h1 class="font-light text-3xl border-b border-gray-200 mb-4">Squirrel Release Server</h1>
  <ul class="flex gap-2">
    <li>01 November 2016</li>
    
      <li><a href="/tag/php">#php</a></li>
    
      <li><a href="/tag/electron">#electron</a></li>
    
  </ul>
</div>
<div class="bg-white prose border-gray-300 border shadow-xl p-2"><p>Squirrel Release Server is a low featured release server for squirrel.</p>

<p>It supports:</p>

<ul>
  <li>Windows clients.</li>
  <li>Listing all releases after and including the local users current version.</li>
  <li>Delta updates to reduce file size.</li>
</ul>

<p>And thats it!</p>

<p>This is all I needed it to support. Our app is Windows only and installed by us using an MSI. I had been using <a href="https://github.com/ArekSredzki/electron-release-server">Electron Release Server</a> which worked but was lacking the support the delta updates. I also begrudged having another service running with a full UI when our users never saw it.</p>

<p>Delta updates are the main reason I wrote Squirrel Release Server. Our apps <code class="language-plaintext highlighter-rouge">nupkgs</code> are around 70MB which given the number of clients mean a huge amount of bandwidth used for each update. This is both on our server and the schools internet connections, ever thinking of our customers we didn’t want the start of a computing lesson to mean 30 laptops downloading 70MB each slowing file access etc…</p>

<p>Our latest update was made available as a 100KB delta. That turns the 2.1GB download from above into 3MB. Squirrel appears to take the path of least download. Preferring to update from 0.2.0 to 0.2.3 using 0.2.1-delta, 0.2.2-delta and 0.2.3-delta instead of 0.2.3-full.</p>

<p>PHP might sound like an odd choice but we already have the infrastructure in place to host PHP files without much issue.</p>

<p>We use GitLab for our applications source with the GitLab CI runner on the server that hosts squirrel release server. Updates get built and copied into place automatically after a push to the master branch. This saves building the releases on my Surface (slowly) to upload them to Electron Release Server.</p>

<h2 id="using-squirrel-release-server">Using Squirrel Release Server</h2>

<p>You can grab a copy from the <a href="https://github.com/Arcath/squirrel-release-server">git repository</a> which also contains the IIS and apache config required for it to work.</p>

<p>Run <code class="language-plaintext highlighter-rouge">composer install</code> to install the dependencies. Edit <code class="language-plaintext highlighter-rouge">config.json</code> so that baseurl matches the path to your install.</p>

<p>You now need to create a releases folder. Inside which you need a win64 and win32 folder. Place you win64 nupkgs in the win64 folder and win32 in win32.</p>

<p>Tell Squirrel to update from http://www.yourdomain.com/yourapp/win64. Assuming that Squirrel release server is in the yourapp folder and you want the win64 updates.</p>

<p>That is it. Squirrel and Squirrel Release Server then does everything you need to install the update.</p>

<p>Squirrel Release Server serves any nupkg in the right folder, this gives the ability to do as I do and have your CI copy the built packages into place.</p>

<h2 id="the-future">The Future</h2>

<p>Squirrel Release Server is very low featured, very are some obvious improvements that can be made mainly Mac support but I don’t have a Mac or a squirrel app that works on Mac to test with (PRs welcome).</p>
</div>
        </section>
        <footer class="mt-4 px-4 lg:px-0">
          &copy; Adam Laycock 2024
        </footer>
      </div>
    </div>
  </body>
</html>